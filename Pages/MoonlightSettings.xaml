<Page
    x:Class="moonlight_xbox_dx.MoonlightSettings"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:moonlight_xbox_dx"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
    <Grid Padding="8,16,8,8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0 0 0 8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Margin="0 0 0 16" Name="backButton" Click="backButton_Click">
                <Button.Content>
                    <SymbolIcon Symbol="Back" />
                </Button.Content>
            </Button>

            <StackPanel Grid.Column="1" Margin="16 0 0 0" VerticalAlignment="Center">
                <TextBlock Text="App Settings" />
            </StackPanel>
            <Button x:Name="WelcomeButton" Grid.Column="2" Click="WelcomeButton_Click" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,0,16">Open Welcome Wizard</Button>
        </Grid>

        <local:TabsLayout x:Name="tabsLayout" Grid.Row="1">
            <local:TabsLayout.LeftContent>
                <Grid>
                    <StackPanel x:Name="ScreenPanel" Visibility="Visible" Padding="32,0">
                        <Border Margin="0,8,0,8" HorizontalAlignment="Stretch">
                            <Border.Background>
                                <SolidColorBrush Color="{ThemeResource SystemListAccentMediumColor}"/>
                            </Border.Background>
                            <Grid VerticalAlignment="Center">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Margin="8,8,12,8" VerticalAlignment="Center">
                                    <Run FontFamily="Segoe Fluent Icons" FontSize="32">&#xe946;</Run>
                                </TextBlock>
                                <TextBlock Grid.Column="1" Margin="4,8,4,8" VerticalAlignment="Center" HorizontalAlignment="Stretch" TextWrapping="Wrap">
                                    Looking to change Resolution, FPS or Bitrate? Use the settings button in the app grid to change the settings of your host.
                                </TextBlock>
                            </Grid>
                        </Border>

                        <Grid RowSpacing="8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition  Width="250" />
                                <ColumnDefinition  Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Column="0" Grid.Row="0">Autostart Host:</TextBlock>
                            <ComboBox Grid.Column="1" Grid.Row="0" x:Name="HostSelector" SelectionChanged="HostSelector_SelectionChanged" />
                            <TextBlock Grid.Column="0" Grid.Row="2">Screen Margin Height:</TextBlock>
                            <Slider Grid.Row="2" Grid.Column="1" Value="{x:Bind State.ScreenMarginHeight}" x:DefaultBindMode="TwoWay" HorizontalAlignment="Stretch" Minimum="0" Maximum="100" StepFrequency="1" />
                            <TextBlock Grid.Column="0" Grid.Row="3">Screen Margin Width:</TextBlock>
                            <Slider Grid.Row="3" Grid.Column="1" Value="{x:Bind State.ScreenMarginWidth}" x:DefaultBindMode="TwoWay" HorizontalAlignment="Stretch" Minimum="0" Maximum="100" StepFrequency="1" />
                            <TextBlock Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" TextAlignment="Left" TextWrapping="Wrap">Change these parameters until you can see a green border around the screen</TextBlock>
                        </Grid>
                    </StackPanel>

                    <StackPanel x:Name="InputPanel" Visibility="Collapsed" Padding="32,0">
                        <Grid RowSpacing="8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition  Width="250" />
                                <ColumnDefinition  Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Column="0" Grid.Row="0">Mouse Sensitivity:</TextBlock>
                            <Slider Grid.Row="0" Grid.Column="1" Value="{x:Bind State.MouseSensitivity}" x:DefaultBindMode="TwoWay" HorizontalAlignment="Stretch" Minimum="1" Maximum="16" StepFrequency="1" />
                            
                            <TextBlock Grid.Row="1">Experimental Keyboard</TextBlock>
                            <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal">
                                <CheckBox IsChecked="{x:Bind State.EnableKeyboard,Mode=TwoWay}" Name="KeyboardEnable" XYFocusRight="{x:Bind KeyboardLayoutSelector}">Enabled</CheckBox>
                                <ComboBox XYFocusLeft="{x:Bind KeyboardEnable}" Grid.Column="7" Grid.Row="0" x:Name="KeyboardLayoutSelector" SelectionChanged="LayoutSelector_SelectionChanged" HorizontalAlignment="Stretch" />
                                <TextBlock>Layout</TextBlock>
                            </StackPanel>
                            
                            <TextBlock Grid.Row="2">Use Alternate Menu Combination</TextBlock>
                            <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
                                <CheckBox IsChecked="{x:Bind State.AlternateCombination,Mode=TwoWay}" XYFocusRight="{x:Bind KeyboardLayoutSelector}" HorizontalAlignment="Stretch">Use LT+RT+LB+RB instead of Menu+View to show the menu</CheckBox>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Grid>
            </local:TabsLayout.LeftContent>

            <local:TabsLayout.TabsContent>
                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Top">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <Button Grid.Row="0" Grid.Column="0" Style="{StaticResource TabButtonStyle}" local:TabsLayout.TargetPanelName="ScreenPanel" Content="Screen" HorizontalAlignment="Stretch" />
                    <Button Grid.Row="1" Grid.Column="0" Style="{StaticResource TabButtonStyle}" local:TabsLayout.TargetPanelName="InputPanel" Content="Input" HorizontalAlignment="Stretch" />
                </Grid>
            </local:TabsLayout.TabsContent>
        </local:TabsLayout>
    </Grid>
</Page>
